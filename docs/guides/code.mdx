---
title: "Code Agent"
description: "AI-powered full-stack Next.js application generation with TypeScript, Prisma, and Tailwind"
---

<Info>
  **Source Code:** [`src/gaia/agents/code/agent.py`](https://github.com/amd/gaia/blob/main/src/gaia/agents/code/agent.py) · [`src/gaia/agents/code/tools/`](https://github.com/amd/gaia/tree/main/src/gaia/agents/code/tools)
</Info>

<Badge text="development" color="orange" />

<Note>
  The Code Agent now focuses on generating full-stack TypeScript web applications (Next.js 15 + Prisma + Tailwind). Python code generation is no longer supported.
</Note>

<Info>
  **First time here?** Complete the [Setup](/setup) guide first to install GAIA and its dependencies.
</Info>

The GAIA Code Agent turns a natural-language prompt into a working Next.js application. It designs the data model, builds Prisma schemas, generates REST API routes with Zod validation, creates React pages, applies Tailwind styling, validates TypeScript, and iterates until the app builds successfully.

## Key Features

<CardGroup cols={2}>
  <Card title="Full-Stack Generation" icon="robot">
    Next.js 15 apps with API routes, React pages, and Tailwind styling
  </Card>

  <Card title="Prisma Data Modeling" icon="database">
    SQLite schemas with autogenerated IDs and timestamps
  </Card>

  <Card title="Validated APIs" icon="shield-check">
    REST endpoints with Zod validation and clear error responses
  </Card>

  <Card title="Type-Safe UI" icon="desktop">
    React components for list, create, and detail flows with TypeScript types
  </Card>

  <Card title="Iterative Fixes" icon="wrench">
    TypeScript checks, Next.js builds, and auto-fix loops until green
  </Card>

  <Card title="CLI Control" icon="list-check">
    Step-through, traces, and background process management for long runs
  </Card>
</CardGroup>

## Quick Start

<Steps>
  <Step title="Install development dependencies">
    ```bash
    uv pip install -e ".[dev]"
    ```
  </Step>

  <Step title="Start Lemonade server (local LLM)">
    ```bash
    lemonade-server serve --ctx-size 32768
    ```
  </Step>

  <Step title="Generate an app">
    ```bash
    gaia code "Build me a movie tracking app in nextjs where I can track the movie title, genre, date watched, and a score out of 10" --path movie-web-app
    ```
  </Step>

  <Step title="Run the generated app">
    ```bash
    cd movie-web-app
    npm run dev
    ```
    The app serves at http://localhost:3000
  </Step>
</Steps>

### Basic Examples

<Tabs>
  <Tab title="Workout Tracker">
    ```bash
    gaia code "Build me a workout tracking app in nextjs where I can track workout, duration, date, and goal"
    ```
  </Tab>

  <Tab title="Restaurant Reviews">
    ```bash
    gaia code "Build me a restaurant rating application. I want to be able to put the location of the restaurant, the food that I ate, and my review"
    ```
  </Tab>

  <Tab title="AI Tool Leaderboard">
    ```bash
    gaia code "Build me an AI tool rating app in nextjs that scores speed and quality out of 10, shows a leaderboard, and captures a description"
    ```
  </Tab>

  <Tab title="Simple Todos">
    ```bash
    gaia code "Build me a todo tracking app using typescript"
    ```
  </Tab>

  <Tab title="Interactive Mode">
    ```bash
    gaia code --interactive "Create a movie tracker with title, genre, date watched, and score out of 10"
    ```
  </Tab>

  <Tab title="Cloud LLMs">
    ```bash
    gaia code "Create a task tracker with categories and priority levels" --use-claude
    ```
    ```bash
    gaia code "Create a task tracker with categories and priority levels" --use-chatgpt
    ```
  </Tab>
</Tabs>

## Next.js Full-Stack App Generation

The Code Agent outputs a complete Next.js 15 project with Prisma, Zod, and Tailwind baked in.

```
your-app/
├── prisma/
│   └── schema.prisma          # SQLite models with IDs and timestamps
├── src/
│   ├── app/
│   │   ├── api/
│   │   │   └── [resource]/
│   │   │       ├── route.ts        # GET, POST
│   │   │       └── [id]/route.ts   # GET, PUT, DELETE
│   │   ├── [resource]/
│   │   │   ├── page.tsx        # List view
│   │   │   ├── new/page.tsx    # Create form
│   │   │   └── [id]/page.tsx   # Detail view
│   │   ├── layout.tsx          # Root layout
│   │   ├── page.tsx            # Landing page with navigation
│   │   └── globals.css         # Tailwind styles
│   └── lib/
│       └── prisma.ts           # Prisma client bootstrap
├── package.json
├── tsconfig.json
├── tailwind.config.ts
└── next.config.js
```

**Stack defaults:**
- Next.js 15 with the App Router
- TypeScript + strict typing
- Prisma ORM with SQLite
- REST API routes validated with Zod
- Tailwind CSS styling for layouts, forms, and states

## Debug and Trace Options

<CardGroup cols={2}>
  <Card title="Debug Logging" icon="bug">
    ```bash
    gaia code "Create app" --debug
    ```
    See internal decision logs
  </Card>

  <Card title="Show Prompts" icon="eye">
    ```bash
    gaia code "Create app" --show-prompts
    ```
    Display prompts sent to LLM
  </Card>

  <Card title="JSON Trace" icon="file-code">
    ```bash
    gaia code "Create app" --trace
    ```
    Save detailed execution trace
  </Card>

  <Card title="Silent Mode" icon="volume-xmark">
    ```bash
    gaia code "Create app" --silent
    ```
    JSON output only (for automation)
  </Card>

  <Card title="Step-Through" icon="forward-step">
    ```bash
    gaia code "Create app" --step-through
    ```
    Pause at each agent step
  </Card>

  <Card title="Max Steps Control" icon="gauge-high">
    ```bash
    gaia code "Create app" --max-steps 150
    ```
    Override default maximum steps
  </Card>

  <Card title="Performance Stats" icon="chart-line">
    ```bash
    gaia code "Create app" --show-stats
    ```
    Display LLM performance metrics
  </Card>

  <Card title="Full Debug" icon="magnifying-glass-chart">
    ```bash
    gaia code "Create app" --debug --show-prompts --trace
    ```
    Maximum debugging information
  </Card>
</CardGroup>

### JSON Output Structure

The `--trace` flag saves a complete trace with detailed information:

```json title="trace_output.json"
{
  "status": "success",
  "result": "Final answer from agent",
  "system_prompt": "Complete system prompt used",
  "conversation": [
    {"role": "user", "content": "User's query"},
    {"role": "assistant", "content": {"thought": "...", "tool": "...", "tool_args": {...}}},
    {"role": "system", "content": {...}}
  ],
  "steps_taken": 28,
  "duration": 123.45,
  "total_input_tokens": 15000,
  "total_output_tokens": 8000,
  "output_file": "/absolute/path/to/output.json"
}
```

## Advanced Application Examples

```bash
# HR system MVP
gaia code "Build an HRMS app in nextjs with employees, departments, and leave requests that can be approved or rejected"

# Inventory tracker
gaia code "Create an inventory tracker in nextjs with products, stock counts, and reorder thresholds"

# CRM starter
gaia code "Create a simple CRM in nextjs with contacts, companies, and notes"
```

<Accordion title="What Gets Generated">
  - Prisma schema with entities, IDs, timestamps, and relations when implied
  - API routes for CRUD with Zod validation
  - React pages for list, create, and detail flows
  - Tailwind styling for layouts, forms, and state handling
  - TypeScript validation and Next.js build with auto-fix loop
</Accordion>

<Warning>
  Generated apps are starting points. Review logic, add auth/authorization, and harden edge cases before production use.
</Warning>

## Testing

Run targeted checks for the TypeScript and Next.js toolchain:
```bash
python -m pytest tests/test_typescript_tools.py -v
python -m pytest tests/test_checklist_orchestration.py -m "not slow and not integration" -v
```

Full suite (slower):
```bash
python -m pytest -m "not slow and not integration"
```

## API & VSCode Integration

<Info>
  The Code Agent is available through the GAIA API Server as the `gaia-code` model, providing an OpenAI-compatible REST API for IDEs and automation.
</Info>

### Quick Start

<Steps>
  <Step title="Start Lemonade server">
    ```bash
    lemonade-server serve --ctx-size 32768
    ```
  </Step>

  <Step title="Install API dependencies">
    ```bash
    uv pip install -e ".[api]"
    ```
  </Step>

  <Step title="Start GAIA API server">
    ```bash
    gaia api start
    ```
  </Step>

  <Step title="Call the model">
    ```bash
    curl -X POST http://localhost:8080/v1/chat/completions \
      -H "Content-Type: application/json" \
      -d '{
        "model": "gaia-code",
        "messages": [{"role": "user", "content": "Build me a movie tracking app in nextjs"}]
      }'
    ```
  </Step>
</Steps>

### API Highlights

- **OpenAI Compatible**: Works with OpenAI clients and compatible tooling
- **Workspace Awareness**: Uses your current repo as context
- **Streaming Support**: Real-time updates while generating
- **Multi-Turn**: Maintain context across requests

<CardGroup cols={2}>
  <Card title="VSCode Integration Guide" icon="code" href="/integrations/vscode">
    IDE setup for calling `gaia-code`
  </Card>

  <Card title="API Server Documentation" icon="server" href="/reference/api">
    REST examples and usage
  </Card>
</CardGroup>

## Workflow Capabilities

<Steps>
  <Step title="Analyze Requirements">
    Interpret the prompt and determine the minimum viable schema
  </Step>

  <Step title="Generate Prisma Schema">
    Create models with IDs, timestamps, and inferred field types
  </Step>

  <Step title="Build API Routes">
    Scaffold REST endpoints with Zod validation for CRUD operations
  </Step>

  <Step title="Create React Pages">
    Generate list, creation, and detail pages wired to the APIs
  </Step>

  <Step title="Apply Styling">
    Add Tailwind-powered layouts, forms, and state handling
  </Step>

  <Step title="Validate & Build">
    Run TypeScript checks and Next.js build; collect any errors
  </Step>

  <Step title="Auto-Fix Loop">
    Apply targeted fixes and re-run validation/build until clean
  </Step>
</Steps>

<Note>
  Success depends on task complexity and LLM context. Review the generated app before shipping.
</Note>

## File Management

<CardGroup cols={2}>
  <Card title="Data Model" icon="database">
    `prisma/schema.prisma`
  </Card>

  <Card title="API Routes" icon="network-wired">
    `src/app/api/[resource]/route.ts` and `src/app/api/[resource]/[id]/route.ts`
  </Card>

  <Card title="UI Pages" icon="desktop">
    `src/app/[resource]/page.tsx`, `src/app/[resource]/new/page.tsx`, `src/app/[resource]/[id]/page.tsx`
  </Card>

  <Card title="Prisma Client" icon="plug">
    `src/lib/prisma.ts`
  </Card>

  <Card title="Styling" icon="palette">
    `src/app/globals.css` and `tailwind.config.ts`
  </Card>

  <Card title="Config" icon="gear">
    `tsconfig.json`, `next.config.js`, `package.json`
  </Card>
</CardGroup>

## Available Tools

<AccordionGroup>
  <Accordion title="Project Bootstrap & Processes">
    - `run_cli_command` - Execute npm/yarn commands and capture output
    - `cleanup_all_processes` / `stop_process` / `list_processes` - Manage background runs
  </Accordion>

  <Accordion title="Data Modeling & APIs">
    - `manage_data_model` - Create or update Prisma models
    - `manage_api_endpoint` - Generate REST routes with Zod validation
    - `validate_crud_structure` - Ensure CRUD files exist for each resource
  </Accordion>

  <Accordion title="UI & Styling">
    - `manage_react_component` - Generate list, form, detail React pages
    - `setup_app_styling` - Apply Tailwind design system and globals
    - `update_landing_page` - Wire navigation and landing content
  </Accordion>

  <Accordion title="Validation & Quality">
    - `validate_typescript` - Run TypeScript compiler checks
    - `test_crud_api` - Smoke-test CRUD endpoints
    - `validate_styles` - Check CSS and design consistency
  </Accordion>

  <Accordion title="Debugging & Error Fixes">
    - `fix_code` - LLM-driven targeted file fix for validation/build errors (used in remediation checklists)
  </Accordion>

  <Accordion title="Tooling Setup">
    - `setup_prisma` - Initialize Prisma and database config
    - `setup_nextjs_testing` - Configure Vitest where needed
  </Accordion>
</AccordionGroup>

## External Information Lookup

The agent can optionally use web search (Perplexity) when `PERPLEXITY_API_KEY` is set in `.env` to unblock documentation or best-practice questions.

## Troubleshooting

<AccordionGroup>
  <Accordion title="LLM server not running">
    ```
    ❌ Error: Lemonade server is not running or not accessible.
    ```
    Start the server with:
    ```bash
    lemonade-server serve --ctx-size 32768
    ```
  </Accordion>

  <Accordion title="TypeScript or build errors keep returning">
    - Ensure dependencies are installed: `npm install`
    - Regenerate Prisma client: `npx prisma generate`
    - Push schema: `npx prisma db push`
    - Re-run the agent with `--debug --show-prompts` to inspect fixes
  </Accordion>

  <Accordion title="Prisma client issues">
    - Check `prisma/schema.prisma` for typos
    - Delete `node_modules` and reinstall
    - Verify `DATABASE_URL` (if using a custom provider)
  </Accordion>

  <Accordion title="Port already in use">
    - Stop existing dev servers or run `npm run dev -- --port 3001`
  </Accordion>
</AccordionGroup>

## VS Code Debugging (Developers)

Use the existing launch configurations to step through the agent when it generates Next.js projects.

<Accordion title="Available Debug Configurations">
  1. **Code Agent Debug - Next.js App** - Full project generation workflow
  2. **Code Agent Debug - REST API** - Focus on API route generation
  3. **Code Agent Debug - Interactive** - Step through with `--step-through`
  4. **Code Agent Debug - With Breakpoint** ⭐ - Stops before execution for setting breakpoints
</Accordion>

**Useful breakpoint locations:**
- `src/gaia/agents/code/agent.py` - Agent initialization and orchestration
- `src/gaia/agents/code/tools/typescript_tools.py` - TypeScript/Next.js tooling
- `src/gaia/agents/code/tools/checklist_orchestration.py` - Full-stack checklist workflow
- `src/gaia/agents/base/agent.py` - Base agent loop

## Best Practices

<CardGroup cols={2}>
  <Card title="Be Specific" icon="seedling">
    Include required fields and relationships in the prompt to shape the Prisma schema
  </Card>

  <Card title="Run Setup Commands" icon="terminal">
    After generation, just `cd <path>` and run `npm run dev` (the agent installs dependencies for you)
  </Card>

  <Card title="Review Before Shipping" icon="eye">
    Inspect API validation, UI flows, and database types before deploying
  </Card>

  <Card title="Iterate with Data" icon="repeat">
    Start with the MVP output, then rerun the agent with refined prompts to add features
  </Card>
</CardGroup>

## Next Steps

<CardGroup cols={2}>
  <Card title="VSCode Integration" icon="code" href="/integrations/vscode">
    Use Code Agent directly in VSCode
  </Card>

  <Card title="API Server" icon="server" href="/reference/api">
    Integrate via OpenAI-compatible API
  </Card>

  <Card title="Playbook" icon="book" href="/playbooks/code-agent/part-1-introduction">
    Deep dive into how the Code Agent builds Next.js apps
  </Card>

  <Card title="Features Overview" icon="stars" href="/reference/features">
    Explore all GAIA capabilities
  </Card>
</CardGroup>

---

<small style="color: #666;">

**License**

Copyright(C) 2024-2025 Advanced Micro Devices, Inc. All rights reserved.

SPDX-License-Identifier: MIT

</small>
